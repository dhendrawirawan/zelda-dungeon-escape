controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    projectile = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . d b . . . . . . . 
        . . . . . . d b d . . . . . . . 
        . . . . . . b d . . . . . . . . 
        . . . . . 8 8 8 8 . . . . . . . 
        . . . . 8 8 9 9 8 8 . . . . . . 
        . . . . 8 9 8 8 8 8 8 . . . . . 
        . . . 8 6 8 8 8 8 8 8 . . . . . 
        . . . 8 6 8 8 8 8 8 8 . . . . . 
        . . . 8 8 8 8 8 8 8 8 . . . . . 
        . . . . 8 8 8 8 8 8 8 . . . . . 
        . . . . . 8 8 8 8 . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, mySprite, 40, -70)
    projectile.ay = 50
})
controller.A.onEvent(ControllerButtonEvent.Released, function () {
    animation.runImageAnimation(
    projectile,
    [img`
        .3...........4......
        .33.........44......
        .3d3..44..44d4......
        ..35345544dd44......
        ..3d5d11d55d44......
        ..455111151154......
        .45555115111d44.....
        .4d511555111554.....
        .4451155555d554.....
        ..43d555d55ddd4.....
        .455d555ddd554......
        .455d35dd3d554......
        .44dd4ddd43dd4......
        ..45444444444.......
        .454..444...44......
        .44..........44.....
        ....................
        ....................
        ....................
        ....................
        `,img`
        ..3...........4.....
        ..33.........44.....
        ..3d3..44..44d4.....
        ...35345544dd44.....
        ...3d5d11d55d44.....
        ...155111151154.....
        ..45555115111d44....
        ..4d511555111554....
        ..4451155555d554....
        ...43d555d55ddd4....
        ..455d555ddd554.....
        ..455d35dd3d554.....
        ..44dd4ddd43dd4.....
        ...45444444444......
        ..454..444...44.....
        ..44..........44....
        ....................
        ....................
        ....................
        ....................
        `,img`
        ............44......
        .333........444.....
        ..3d3..44..44d4.....
        ..335345544dd44.....
        ...3d5d11d55d44.....
        ...155111151d54.....
        ..45d5dd15111d44....
        ..4d5d115511d554....
        ..4451113555dd54....
        ...43d5ddd55ddd4....
        ..455dd55ddd554.....
        ..45dd35dd3d354.....
        ..44d54ddd43d34.....
        ...454444444444.....
        ...44...444..444....
        ...44...............
        ....................
        ....................
        ....................
        ....................
        `,img`
        .............44.....
        3333.........444....
        ..3d3..444..44d4....
        ..3353455544dd44....
        ...3d5d111d55d44....
        ...1551111151d54....
        ..45d5dd115111d44...
        ..4d5d1155511d554...
        ..44511133555dd54...
        ..44511133555dd54...
        ...43d5dddd55ddd4...
        ..455dd555ddd554....
        ..45dd35ddd3d354....
        ..44d54dddd43d34....
        ...4544444444444....
        ...44...4444..444...
        ...44...............
        ....................
        ....................
        ....................
        `,img`
        ...............44...
        3333...........444..
        ..3d3...444...44d4..
        ..335334555444dd44..
        ...3d55d111d555d44..
        ...155511111551d54..
        ...155511111551d54..
        ..45d55dd1151111d44.
        ..4d5dd11555111d554.
        ..4451111335555dd54.
        ..4451111335555dd54.
        ...43dd5dddd555ddd4.
        ..455ddd555dddd554..
        ..455ddd555dddd554..
        ..45ddd35ddd33d354..
        ..44d554dddd443d34..
        ...454444444444444..
        ...44....44444..444.
        ...44...............
        ....................
        `,img`
        ................44..
        3333............444.
        ..3d3...4444...44d4.
        ..3353345555444dd44.
        ...3d55d1111d555d44.
        ...1555111111551d54.
        ...1555111111551d54.
        ..45d55dd11151111d44
        ..4d5dd115555111d554
        ..44511113335555dd54
        ..44511113335555dd54
        ..44511113335555dd54
        ...43dd5ddddd555ddd4
        ..455ddd5555dddd554.
        ..455ddd5555dddd554.
        ..45ddd35dddd33d354.
        ..44d554ddddd443d34.
        ...4544444444444444.
        ...44....444444..444
        ...44...............
        `,img`
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        ....................
        `],
    100,
    false
    )
    projectile.ay = 0
    projectile.ax = 0
    projectile.vy = 0
    projectile.vx = 0
})
let projectile: Sprite = null
let mySprite: Sprite = null
tiles.setCurrentTilemap(tilemap`level1`)
mySprite = sprites.create(img`
    . . . . . . f f f f . . . . . . 
    . . . . f f f 2 2 f f f . . . . 
    . . . f f f 2 2 2 2 f f f . . . 
    . . f f f e e e e e e f f f . . 
    . . f f e 2 2 2 2 2 2 e e f . . 
    . . f e 2 f f f f f f 2 e f . . 
    . . f f f f e e e e f f f f . . 
    . f f e f b f 4 4 f b f e f f . 
    . f e e 4 1 f d d f 1 4 e e f . 
    . . f e e d d d d d d e e f . . 
    . . . f e e 4 4 4 4 e e f . . . 
    . . e 4 f 2 2 2 2 2 2 f 4 e . . 
    . . 4 d f 2 2 2 2 2 2 f d 4 . . 
    . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
    . . . . . f f f f f f . . . . . 
    . . . . . f f . . f f . . . . . 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(mySprite, sprites.dungeon.collectibleInsignia)
controller.moveSprite(mySprite, 100, 100)
mySprite.setStayInScreen(true)
scene.cameraFollowSprite(mySprite)
mySprite.ay = 10
